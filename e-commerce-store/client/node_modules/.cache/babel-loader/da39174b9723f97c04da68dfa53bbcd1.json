{"ast":null,"code":"var _jsxFileName = \"/Users/fazalmahmood/SWE-E-Commerce-Project/e-commerce-store/client/src/components/Cart/Checkout.js\";\nimport React, { Component } from \"react\";\nimport { ProductConsumer } from \"../../context-product\";\nimport { Redirect } from \"react-router-dom\";\nimport Title from \"../General/Title\";\nimport axios from \"axios\";\n\nconst SmartyStreetsSDK = require(\"smartystreets-javascript-sdk\");\n\nconst SmartyStreetsCore = SmartyStreetsSDK.core;\nconst Lookup = SmartyStreetsSDK.usStreet.Lookup;\nlet authId = 24176270692624972; // created on smartystreets account page for localhost\n\nlet authToken = process.env.SMARTY_AUTH_TOKEN;\nconst credentials = new SmartyStreetsCore.StaticCredentials(authId, authToken);\nlet verifyAddress = SmartyStreetsCore.buildClient.usStreet(credentials);\nlet batch = new SmartyStreetsCore.Batch();\nlet lookup1 = new Lookup();\n\nfunction HandleDisplayErrors(props) {\n  let buffer = [];\n\n  if (!props.address_verified) {\n    buffer.push( /*#__PURE__*/React.createElement(\"div\", {\n      key: \"address1\",\n      style: {\n        color: \"red\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 24,\n        columnNumber: 13\n      }\n    }, \"* Please enter a valid Shipping Address.\"));\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      padding: 10\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 29,\n      columnNumber: 12\n    }\n  }, buffer);\n}\n\nexport default class Checkout extends Component {\n  constructor(props) {\n    super(props); // Assign state itself, and a default value for items\n\n    this.state = {\n      address_line1: \"\",\n      address_line2: \"\",\n      address_secondary: \"\",\n      address_zipcode: \"\",\n      address_city: \"\",\n      address_state: \"\",\n      email_address: \"\",\n      isEmailChanged: false,\n      id: \"\",\n      first_name: \"\",\n      last_name: \"\"\n    };\n    this.address_verified = false;\n  }\n\n  async componentDidMount() {\n    await this.sessionCheck();\n    await this.loadUserValues();\n    this.forceUpdate();\n  }\n\n  verifyShippingAddress() {\n    return new Promise(resolve => {\n      lookup1.street = this.state.address_line1;\n      lookup1.street2 = this.state.address_line2;\n      lookup1.secondary = this.state.address_secondary;\n      lookup1.city = this.state.address_city;\n      lookup1.state = this.state.address_state;\n      lookup1.zipCode = this.state.address_zipcode;\n      lookup1.match = \"invalid\"; // \"invalid\" is the most permissive match\n\n      batch.add(lookup1);\n      verifyAddress.send(batch).then(response => {\n        this.address_verified = true;\n        resolve(\"resolved\");\n      }).catch(() => {\n        this.address_verified = false;\n        console.log(\"address NOT verified\");\n      });\n    });\n  }\n\n  loadUserValues() {\n    return new Promise(resolve => {\n      axios.get(\"http://localhost:4000/catweallgetalong/sessions/user-info\").then(response => {\n        this.setState({\n          address_line1: response.data[0].shipping_address[0].street1,\n          address_line2: response.data[0].shipping_address[0].street2,\n          address_secondary: response.data[0].shipping_address[0].secondary,\n          address_zipcode: response.data[0].shipping_address[0].zipcode,\n          address_city: response.data[0].shipping_address[0].city,\n          address_state: response.data[0].shipping_address[0].state,\n          email_address: response.data[0].email_address,\n          first_name: response.data[0].first_name,\n          last_name: response.data[0].last_name,\n          id: response.data[0]._id\n        });\n      }).catch(function (error) {\n        console.log(error);\n      });\n    });\n  }\n\n  sessionCheck() {\n    return new Promise(resolve => {\n      axios.get(\"http://localhost:4000/catweallgetalong/sessions/\").then(res => {\n        //do something\n        if (res.data === true) {\n          this.directTo = \"/checkout\";\n        } else {\n          this.directTo = \"/account\";\n        }\n\n        resolve(\"resolved\");\n      }).catch(function (error) {\n        console.log(error);\n      });\n    });\n  }\n\n  async handleOnSubmit(event) {\n    event.preventDefault(); // check address is valid\n\n    if (this.state.address_line1.length > 0 && this.state.address_city.length > 0 && this.state.address_state.length > 0 && this.state.address_zipcode.length > 0) {\n      await this.verifyShippingAddress();\n    } // check email duplicate db only if they changed the value!\n\n\n    if (this.state.isEmailChanged) {\n      await this.checkDuplicateEmail(); // check email valid\n\n      this.email_verified = document.querySelector('input[name=\"nb-result\"]').value === \"valid\";\n    } else {\n      this.email_verified = true;\n      this.email_isDuplicate = false;\n    } //verify that all REQUIRED inputs are filled\n\n\n    this.name_isInputted = this.state.first_name.length > 0 && this.state.last_name.length > 0;\n\n    if (this.address_verified && this.email_verified && !this.email_isDuplicate && this.name_isInputted) {\n      // post accounts update by id\n      await this.updateAccountInDB(); // log user in via db\n\n      await this.addSession(); // logged in so redirect to /cart\n\n      if (this.sessionAdded) {\n        //redirect to cart\n        this.setState({\n          redirect: true\n        });\n      }\n    } else {\n      // inject red text informing what to fix\n      this.display_errors = true;\n      this.forceUpdate();\n    }\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"section\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Title, {\n      name: \"Confirm\",\n      title: \"Checkout\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(ProductConsumer, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 17\n      }\n    }, value => {\n      const {\n        cart\n      } = value;\n      if (cart.length < 1) return /*#__PURE__*/React.createElement(Redirect, {\n        push: true,\n        to: \"/cart\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 196,\n          columnNumber: 36\n        }\n      });\n    }), /*#__PURE__*/React.createElement(HandleDisplayErrors, {\n      address_verified: this.address_verified,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"form\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"addLine1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 25\n      }\n    }, \"Address Line 1\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"address\",\n      className: \"form-control\",\n      id: \"addLine1\",\n      placeholder: \"3901 SW 154th Ave\",\n      onChange: event => this.setState({\n        address_line1: event.target.value\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 25\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"addLine2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 25\n      }\n    }, \"Address Line 2\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"address\",\n      className: \"form-control\",\n      id: \"addLine2\",\n      placeholder: \"closest under the street\",\n      onChange: event => this.setState({\n        address_line2: event.target.value\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 25\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"secondary\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 230,\n        columnNumber: 25\n      }\n    }, \"Apt / Suite / Other\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"address\",\n      className: \"form-control\",\n      id: \"secondary\",\n      placeholder: \"Apt# 314\",\n      onChange: event => this.setState({\n        address_secondary: event.target.value\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 231,\n        columnNumber: 25\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 243,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"city\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 244,\n        columnNumber: 25\n      }\n    }, \"City\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"address\",\n      className: \"form-control\",\n      id: \"city\",\n      placeholder: \"Davie\",\n      onChange: event => this.setState({\n        address_city: event.target.value\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 245,\n        columnNumber: 25\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 257,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"zip\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 258,\n        columnNumber: 25\n      }\n    }, \"Zipcode\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"address\",\n      className: \"form-control\",\n      id: \"zip\",\n      placeholder: \"33331\",\n      onChange: event => this.setState({\n        address_zipcode: event.target.value\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 259,\n        columnNumber: 25\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 271,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"state\",\n      className: \"col-s control-label\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 272,\n        columnNumber: 25\n      }\n    }, \"State\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-s\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 275,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"select\", {\n      className: \"form-control\",\n      id: \"state\",\n      name: \"state\",\n      onChange: event => this.setState({\n        address_state: event.target.value\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 276,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"option\", {\n      value: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 286,\n        columnNumber: 33\n      }\n    }, \"N/A\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"AK\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 287,\n        columnNumber: 33\n      }\n    }, \"Alaska\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"AL\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 288,\n        columnNumber: 33\n      }\n    }, \"Alabama\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"AR\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 289,\n        columnNumber: 33\n      }\n    }, \"Arkansas\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"AZ\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 290,\n        columnNumber: 33\n      }\n    }, \"Arizona\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"CA\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 291,\n        columnNumber: 33\n      }\n    }, \"California\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"CO\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 292,\n        columnNumber: 33\n      }\n    }, \"Colorado\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"CT\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 293,\n        columnNumber: 33\n      }\n    }, \"Connecticut\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"DC\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 294,\n        columnNumber: 33\n      }\n    }, \"District of Columbia\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"DE\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 295,\n        columnNumber: 33\n      }\n    }, \"Delaware\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"FL\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 296,\n        columnNumber: 33\n      }\n    }, \"Florida\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"GA\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 297,\n        columnNumber: 33\n      }\n    }, \"Georgia\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"HI\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 298,\n        columnNumber: 33\n      }\n    }, \"Hawaii\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"IA\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 299,\n        columnNumber: 33\n      }\n    }, \"Iowa\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"ID\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 300,\n        columnNumber: 33\n      }\n    }, \"Idaho\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"IL\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 301,\n        columnNumber: 33\n      }\n    }, \"Illinois\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"IN\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 302,\n        columnNumber: 33\n      }\n    }, \"Indiana\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"KS\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 303,\n        columnNumber: 33\n      }\n    }, \"Kansas\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"KY\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 304,\n        columnNumber: 33\n      }\n    }, \"Kentucky\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"LA\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 305,\n        columnNumber: 33\n      }\n    }, \"Louisiana\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"MA\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 306,\n        columnNumber: 33\n      }\n    }, \"Massachusetts\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"MD\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 307,\n        columnNumber: 33\n      }\n    }, \"Maryland\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"ME\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 308,\n        columnNumber: 33\n      }\n    }, \"Maine\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"MI\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 309,\n        columnNumber: 33\n      }\n    }, \"Michigan\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"MN\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 310,\n        columnNumber: 33\n      }\n    }, \"Minnesota\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"MO\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 311,\n        columnNumber: 33\n      }\n    }, \"Missouri\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"MS\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 312,\n        columnNumber: 33\n      }\n    }, \"Mississippi\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"MT\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 313,\n        columnNumber: 33\n      }\n    }, \"Montana\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"NC\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 314,\n        columnNumber: 33\n      }\n    }, \"North Carolina\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"ND\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 315,\n        columnNumber: 33\n      }\n    }, \"North Dakota\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"NE\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 316,\n        columnNumber: 33\n      }\n    }, \"Nebraska\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"NH\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 317,\n        columnNumber: 33\n      }\n    }, \"New Hampshire\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"NJ\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 318,\n        columnNumber: 33\n      }\n    }, \"New Jersey\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"NM\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 319,\n        columnNumber: 33\n      }\n    }, \"New Mexico\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"NV\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 320,\n        columnNumber: 33\n      }\n    }, \"Nevada\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"NY\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 321,\n        columnNumber: 33\n      }\n    }, \"New York\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"OH\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 322,\n        columnNumber: 33\n      }\n    }, \"Ohio\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"OK\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 323,\n        columnNumber: 33\n      }\n    }, \"Oklahoma\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"OR\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 324,\n        columnNumber: 33\n      }\n    }, \"Oregon\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"PA\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 325,\n        columnNumber: 33\n      }\n    }, \"Pennsylvania\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"PR\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 326,\n        columnNumber: 33\n      }\n    }, \"Puerto Rico\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"RI\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 327,\n        columnNumber: 33\n      }\n    }, \"Rhode Island\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"SC\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 328,\n        columnNumber: 33\n      }\n    }, \"South Carolina\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"SD\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 329,\n        columnNumber: 33\n      }\n    }, \"South Dakota\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"TN\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 330,\n        columnNumber: 33\n      }\n    }, \"Tennessee\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"TX\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 331,\n        columnNumber: 33\n      }\n    }, \"Texas\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"UT\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 332,\n        columnNumber: 33\n      }\n    }, \"Utah\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"VA\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 333,\n        columnNumber: 33\n      }\n    }, \"Virginia\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"VT\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 334,\n        columnNumber: 33\n      }\n    }, \"Vermont\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"WA\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 335,\n        columnNumber: 33\n      }\n    }, \"Washington\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"WI\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 336,\n        columnNumber: 33\n      }\n    }, \"Wisconsin\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"WV\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 337,\n        columnNumber: 33\n      }\n    }, \"West Virginia\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"WY\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 338,\n        columnNumber: 33\n      }\n    }, \"Wyoming\")))), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-primary\",\n      onClick: this.handleOnSubmit.bind(this),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 343,\n        columnNumber: 21\n      }\n    }, \"Submit\")));\n  }\n\n}","map":{"version":3,"sources":["/Users/fazalmahmood/SWE-E-Commerce-Project/e-commerce-store/client/src/components/Cart/Checkout.js"],"names":["React","Component","ProductConsumer","Redirect","Title","axios","SmartyStreetsSDK","require","SmartyStreetsCore","core","Lookup","usStreet","authId","authToken","process","env","SMARTY_AUTH_TOKEN","credentials","StaticCredentials","verifyAddress","buildClient","batch","Batch","lookup1","HandleDisplayErrors","props","buffer","address_verified","push","color","padding","Checkout","constructor","state","address_line1","address_line2","address_secondary","address_zipcode","address_city","address_state","email_address","isEmailChanged","id","first_name","last_name","componentDidMount","sessionCheck","loadUserValues","forceUpdate","verifyShippingAddress","Promise","resolve","street","street2","secondary","city","zipCode","match","add","send","then","response","catch","console","log","get","setState","data","shipping_address","street1","zipcode","_id","error","res","directTo","handleOnSubmit","event","preventDefault","length","checkDuplicateEmail","email_verified","document","querySelector","value","email_isDuplicate","name_isInputted","updateAccountInDB","addSession","sessionAdded","redirect","display_errors","render","cart","target","bind"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { ProductConsumer } from \"../../context-product\";\nimport { Redirect } from \"react-router-dom\";\nimport Title from \"../General/Title\";\nimport axios from \"axios\";\n\nconst SmartyStreetsSDK = require(\"smartystreets-javascript-sdk\");\nconst SmartyStreetsCore = SmartyStreetsSDK.core;\nconst Lookup = SmartyStreetsSDK.usStreet.Lookup;\n\nlet authId = 24176270692624972; // created on smartystreets account page for localhost\nlet authToken = process.env.SMARTY_AUTH_TOKEN;\nconst credentials = new SmartyStreetsCore.StaticCredentials(authId, authToken);\n\nlet verifyAddress = SmartyStreetsCore.buildClient.usStreet(credentials);\n\nlet batch = new SmartyStreetsCore.Batch();\nlet lookup1 = new Lookup();\n\nfunction HandleDisplayErrors(props) {\n    let buffer = [];\n    if (!props.address_verified) {\n        buffer.push(\n            <div key=\"address1\" style={{ color: \"red\" }}>\n                * Please enter a valid Shipping Address.\n            </div>\n        );\n    }\n    return <div style={{ padding: 10 }}>{buffer}</div>;\n}\n\nexport default class Checkout extends Component {\n    constructor(props) {\n        super(props);\n        // Assign state itself, and a default value for items\n        this.state = {\n            address_line1: \"\",\n            address_line2: \"\",\n            address_secondary: \"\",\n            address_zipcode: \"\",\n            address_city: \"\",\n            address_state: \"\",\n\n            email_address: \"\",\n            isEmailChanged: false,\n            id: \"\",\n            first_name: \"\",\n            last_name: \"\",\n        };\n\n        this.address_verified = false;\n    }\n\n    async componentDidMount() {\n        await this.sessionCheck();\n        await this.loadUserValues();\n        this.forceUpdate();\n    }\n\n    verifyShippingAddress() {\n        return new Promise((resolve) => {\n            lookup1.street = this.state.address_line1;\n            lookup1.street2 = this.state.address_line2;\n            lookup1.secondary = this.state.address_secondary;\n            lookup1.city = this.state.address_city;\n            lookup1.state = this.state.address_state;\n            lookup1.zipCode = this.state.address_zipcode;\n            lookup1.match = \"invalid\"; // \"invalid\" is the most permissive match\n            batch.add(lookup1);\n            verifyAddress\n                .send(batch)\n                .then((response) => {\n                    this.address_verified = true;\n                    resolve(\"resolved\");\n                })\n                .catch(() => {\n                    this.address_verified = false;\n                    console.log(\"address NOT verified\");\n                });\n        });\n    }\n\n    loadUserValues() {\n        return new Promise((resolve) => {\n            axios\n                .get(\n                    \"http://localhost:4000/catweallgetalong/sessions/user-info\"\n                )\n                .then((response) => {\n                    this.setState({\n                        address_line1:\n                            response.data[0].shipping_address[0].street1,\n                        address_line2:\n                            response.data[0].shipping_address[0].street2,\n                        address_secondary:\n                            response.data[0].shipping_address[0].secondary,\n                        address_zipcode:\n                            response.data[0].shipping_address[0].zipcode,\n                        address_city: response.data[0].shipping_address[0].city,\n                        address_state:\n                            response.data[0].shipping_address[0].state,\n                        email_address: response.data[0].email_address,\n                        first_name: response.data[0].first_name,\n                        last_name: response.data[0].last_name,\n                        id: response.data[0]._id,\n                    });\n                })\n                .catch(function (error) {\n                    console.log(error);\n                });\n        });\n    }\n\n    sessionCheck() {\n        return new Promise((resolve) => {\n            axios\n                .get(\"http://localhost:4000/catweallgetalong/sessions/\")\n                .then((res) => {\n                    //do something\n                    if (res.data === true) {\n                        this.directTo = \"/checkout\";\n                    } else {\n                        this.directTo = \"/account\";\n                    }\n\n                    resolve(\"resolved\");\n                })\n                .catch(function (error) {\n                    console.log(error);\n                });\n        });\n    }\n\n    async handleOnSubmit(event) {\n        event.preventDefault();\n\n        // check address is valid\n        if (\n            this.state.address_line1.length > 0 &&\n            this.state.address_city.length > 0 &&\n            this.state.address_state.length > 0 &&\n            this.state.address_zipcode.length > 0\n        ) {\n            await this.verifyShippingAddress();\n        }\n\n        // check email duplicate db only if they changed the value!\n        if (this.state.isEmailChanged) {\n            await this.checkDuplicateEmail();\n\n            // check email valid\n            this.email_verified =\n                document.querySelector('input[name=\"nb-result\"]').value ===\n                \"valid\";\n        } else {\n            this.email_verified = true;\n            this.email_isDuplicate = false;\n        }\n\n        //verify that all REQUIRED inputs are filled\n        this.name_isInputted =\n            this.state.first_name.length > 0 && this.state.last_name.length > 0;\n\n        if (\n            this.address_verified &&\n            this.email_verified &&\n            !this.email_isDuplicate &&\n            this.name_isInputted\n        ) {\n            // post accounts update by id\n            await this.updateAccountInDB();\n            // log user in via db\n            await this.addSession();\n            // logged in so redirect to /cart\n            if (this.sessionAdded) {\n                //redirect to cart\n                this.setState({\n                    redirect: true,\n                });\n            }\n        } else {\n            // inject red text informing what to fix\n            this.display_errors = true;\n            this.forceUpdate();\n        }\n    }\n\n    render() {\n        return (\n            <section>\n                <Title name=\"Confirm\" title=\"Checkout\" />\n                <ProductConsumer>\n                    {(value) => {\n                        const { cart } = value;\n                        if (cart.length < 1)\n                            return <Redirect push to=\"/cart\" />;\n                    }}\n                </ProductConsumer>\n                <HandleDisplayErrors address_verified={this.address_verified} />\n                <form>\n                    <div className=\"form-group\">\n                        <label htmlFor=\"addLine1\">Address Line 1</label>\n                        <input\n                            type=\"address\"\n                            className=\"form-control\"\n                            id=\"addLine1\"\n                            placeholder=\"3901 SW 154th Ave\"\n                            onChange={(event) =>\n                                this.setState({\n                                    address_line1: event.target.value,\n                                })\n                            }\n                        />\n                    </div>\n                    <div className=\"form-group\">\n                        <label htmlFor=\"addLine2\">Address Line 2</label>\n                        <input\n                            type=\"address\"\n                            className=\"form-control\"\n                            id=\"addLine2\"\n                            placeholder=\"closest under the street\"\n                            onChange={(event) =>\n                                this.setState({\n                                    address_line2: event.target.value,\n                                })\n                            }\n                        />\n                    </div>\n                    <div className=\"form-group\">\n                        <label htmlFor=\"secondary\">Apt / Suite / Other</label>\n                        <input\n                            type=\"address\"\n                            className=\"form-control\"\n                            id=\"secondary\"\n                            placeholder=\"Apt# 314\"\n                            onChange={(event) =>\n                                this.setState({\n                                    address_secondary: event.target.value,\n                                })\n                            }\n                        />\n                    </div>\n                    <div className=\"form-group\">\n                        <label htmlFor=\"city\">City</label>\n                        <input\n                            type=\"address\"\n                            className=\"form-control\"\n                            id=\"city\"\n                            placeholder=\"Davie\"\n                            onChange={(event) =>\n                                this.setState({\n                                    address_city: event.target.value,\n                                })\n                            }\n                        />\n                    </div>\n                    <div className=\"form-group\">\n                        <label htmlFor=\"zip\">Zipcode</label>\n                        <input\n                            type=\"address\"\n                            className=\"form-control\"\n                            id=\"zip\"\n                            placeholder=\"33331\"\n                            onChange={(event) =>\n                                this.setState({\n                                    address_zipcode: event.target.value,\n                                })\n                            }\n                        />\n                    </div>\n                    <div className=\"form-group\">\n                        <label htmlFor=\"state\" className=\"col-s control-label\">\n                            State\n                        </label>\n                        <div className=\"col-s\">\n                            <select\n                                className=\"form-control\"\n                                id=\"state\"\n                                name=\"state\"\n                                onChange={(event) =>\n                                    this.setState({\n                                        address_state: event.target.value,\n                                    })\n                                }\n                            >\n                                <option value=\"\">N/A</option>\n                                <option value=\"AK\">Alaska</option>\n                                <option value=\"AL\">Alabama</option>\n                                <option value=\"AR\">Arkansas</option>\n                                <option value=\"AZ\">Arizona</option>\n                                <option value=\"CA\">California</option>\n                                <option value=\"CO\">Colorado</option>\n                                <option value=\"CT\">Connecticut</option>\n                                <option value=\"DC\">District of Columbia</option>\n                                <option value=\"DE\">Delaware</option>\n                                <option value=\"FL\">Florida</option>\n                                <option value=\"GA\">Georgia</option>\n                                <option value=\"HI\">Hawaii</option>\n                                <option value=\"IA\">Iowa</option>\n                                <option value=\"ID\">Idaho</option>\n                                <option value=\"IL\">Illinois</option>\n                                <option value=\"IN\">Indiana</option>\n                                <option value=\"KS\">Kansas</option>\n                                <option value=\"KY\">Kentucky</option>\n                                <option value=\"LA\">Louisiana</option>\n                                <option value=\"MA\">Massachusetts</option>\n                                <option value=\"MD\">Maryland</option>\n                                <option value=\"ME\">Maine</option>\n                                <option value=\"MI\">Michigan</option>\n                                <option value=\"MN\">Minnesota</option>\n                                <option value=\"MO\">Missouri</option>\n                                <option value=\"MS\">Mississippi</option>\n                                <option value=\"MT\">Montana</option>\n                                <option value=\"NC\">North Carolina</option>\n                                <option value=\"ND\">North Dakota</option>\n                                <option value=\"NE\">Nebraska</option>\n                                <option value=\"NH\">New Hampshire</option>\n                                <option value=\"NJ\">New Jersey</option>\n                                <option value=\"NM\">New Mexico</option>\n                                <option value=\"NV\">Nevada</option>\n                                <option value=\"NY\">New York</option>\n                                <option value=\"OH\">Ohio</option>\n                                <option value=\"OK\">Oklahoma</option>\n                                <option value=\"OR\">Oregon</option>\n                                <option value=\"PA\">Pennsylvania</option>\n                                <option value=\"PR\">Puerto Rico</option>\n                                <option value=\"RI\">Rhode Island</option>\n                                <option value=\"SC\">South Carolina</option>\n                                <option value=\"SD\">South Dakota</option>\n                                <option value=\"TN\">Tennessee</option>\n                                <option value=\"TX\">Texas</option>\n                                <option value=\"UT\">Utah</option>\n                                <option value=\"VA\">Virginia</option>\n                                <option value=\"VT\">Vermont</option>\n                                <option value=\"WA\">Washington</option>\n                                <option value=\"WI\">Wisconsin</option>\n                                <option value=\"WV\">West Virginia</option>\n                                <option value=\"WY\">Wyoming</option>\n                            </select>\n                        </div>\n                    </div>\n\n                    <button\n                        className=\"btn btn-primary\"\n                        onClick={this.handleOnSubmit.bind(this)}\n                    >\n                        Submit\n                    </button>\n                </form>\n            </section>\n        );\n    }\n}\n"]},"metadata":{},"sourceType":"module"}