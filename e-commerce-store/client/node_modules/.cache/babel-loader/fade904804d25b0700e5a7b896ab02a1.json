{"ast":null,"code":"var _jsxFileName = \"/Users/fazalmahmood/SWE-E-Commerce-Project/e-commerce-store/client/src/components/Account/AccountEdit.js\";\nimport React, { Component } from \"react\";\nimport Title from \"../../components/General/Title\";\nimport { Redirect } from \"react-router-dom\";\nimport axios from \"axios\";\n\nfunction HandleDisplayErrors(props) {\n  let buffer = [];\n\n  if (props.display_errors) {\n    if (props.email_isDuplicate) {\n      buffer.push( /*#__PURE__*/React.createElement(\"div\", {\n        key: \"email1\",\n        style: {\n          color: \"red\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 11,\n          columnNumber: 17\n        }\n      }, \"* Email Address is already in use.\"));\n    } else {\n      if (!props.address_verified) {\n        buffer.push( /*#__PURE__*/React.createElement(\"div\", {\n          key: \"address1\",\n          style: {\n            color: \"red\"\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 18,\n            columnNumber: 21\n          }\n        }, \"* Please enter a valid Shipping Address.\"));\n      }\n\n      if (!props.email_verified) {\n        buffer.push( /*#__PURE__*/React.createElement(\"div\", {\n          key: \"email2\",\n          style: {\n            color: \"red\"\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 25,\n            columnNumber: 21\n          }\n        }, \"* Please enter a valid Email Address.\"));\n      }\n\n      if (!props.name_isInputted) {\n        buffer.push( /*#__PURE__*/React.createElement(\"div\", {\n          key: \"names1\",\n          style: {\n            color: \"red\"\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 32,\n            columnNumber: 21\n          }\n        }, \"* Please enter a First and Last Name.\"));\n      }\n    }\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      padding: 10\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 12\n    }\n  }, buffer);\n}\n\nexport default class AccountEdit extends Component {\n  constructor(props) {\n    super(props); // Assign state itself, and a default value for items\n\n    this.state = {\n      address_line1: \"\",\n      address_line2: \"\",\n      address_secondary: \"\",\n      address_zipcode: \"\",\n      address_city: \"\",\n      address_state: \"\",\n      email_address: \"\",\n      isEmailChanged: false,\n      id: \"\",\n      first_name: \"\",\n      last_name: \"\"\n    };\n    this.redirect = false;\n    this.address_verified = false;\n    this.email_verified = false;\n    this.email_isDuplicate = false;\n    this.name_isInputted = false;\n    this.display_errors = false;\n    this.originalEmail = \"\";\n  }\n\n  async componentDidMount() {\n    await this.loadUserValues();\n  }\n\n  checkDuplicateEmail() {\n    return new Promise(resolve => {\n      axios.get(\"http://localhost:4000/catweallgetalong/accounts/email/\" + this.state.email_address).then(res => {\n        this.email_isDuplicate = res.data > 0;\n        resolve(\"resolved\");\n      }).catch(function (error) {\n        console.log(error); //call the function again?\n      });\n    });\n  }\n\n  updateAccountInDB() {\n    return new Promise(resolve => {\n      console.log(this.state.address_secondary);\n      axios.post(\"http://localhost:4000/catweallgetalong/accounts/edit\", {\n        shipping_address: {\n          street1: this.state.address_line1,\n          street2: this.state.address_line2,\n          secondary: this.state.secondary,\n          city: this.state.address_city,\n          state: this.state.address_state,\n          zipcode: this.state.address_zipcode\n        },\n        _id: this.state.id,\n        first_name: this.state.first_name,\n        last_name: this.state.last_name,\n        email_address: this.state.email_address\n      }).then(function (response) {\n        resolve(\"resolved\");\n      }).catch(function (error) {\n        console.log(error);\n      });\n    });\n  }\n\n  verifyShippingAddress() {\n    return new Promise(resolve => {\n      const SmartyStreetsSDK = require(\"smartystreets-javascript-sdk\");\n\n      const SmartyStreetsCore = SmartyStreetsSDK.core;\n      const Lookup = SmartyStreetsSDK.usStreet.Lookup;\n      let authId = 24176270692624972; // created on smartystreets account page for localhost\n\n      let authToken = process.env.SMARTY_AUTH_TOKEN;\n      const credentials = new SmartyStreetsCore.StaticCredentials(authId, authToken);\n      let verifyAddress = SmartyStreetsCore.buildClient.usStreet(credentials);\n      let batch = new SmartyStreetsCore.Batch();\n      let lookup1 = new Lookup();\n      lookup1.street = this.state.address_line1;\n      lookup1.street2 = this.state.address_line2;\n      lookup1.secondary = this.state.address_secondary;\n      lookup1.city = this.state.address_city;\n      lookup1.state = this.state.address_state;\n      lookup1.zipCode = this.state.address_zipcode;\n      lookup1.match = \"invalid\"; // \"invalid\" is the most permissive match\n\n      batch.add(lookup1);\n      verifyAddress.send(batch).then(response => {\n        response.lookups.map(lookup => {\n          if (lookup.result[0].analysis.dpvMatchCode === \"Y\") {\n            let res = lookup.result[0].lastLine.split(\" \");\n            this.setState({\n              address_line1: lookup.result[0].deliveryLine1.substring(0, this.state.address_line1.length),\n              address_city: res[0],\n              address_state: res[1],\n              address_zipcode: res[2]\n            });\n\n            if (lookup.result[0].deliveryLine2 != null) {\n              this.setState({\n                address_line2: lookup.result[0].deliveryLine2\n              });\n            }\n\n            this.address_verified = true;\n          } else {\n            this.address_verified = false;\n          }\n\n          return null;\n        });\n        resolve(\"resolved\");\n      }).catch(() => {\n        this.address_verified = false;\n        resolve(\"resolved\");\n      });\n    });\n  }\n\n  checkValidityEmail() {\n    return new Promise(resolve => {\n      axios.get(\"http://localhost:4000/catweallgetalong/accounts/nb/\" + this.state.email_address).then(response => {\n        if (response.data === \"valid\") {\n          this.email_verified = true;\n        } else {\n          this.email_verified = false;\n        }\n\n        resolve(\"resolved\");\n      }).catch(function (error) {\n        console.log(error);\n      });\n    });\n  }\n\n  loadUserValues() {\n    return new Promise(resolve => {\n      axios.get(\"http://localhost:4000/catweallgetalong/sessions/user-info\").then(response => {\n        this.setState({\n          address_line1: response.data[0].shipping_address[0].street1,\n          address_line2: response.data[0].shipping_address[0].street2,\n          address_secondary: response.data[0].shipping_address[0].secondary,\n          address_zipcode: response.data[0].shipping_address[0].zipcode,\n          address_city: response.data[0].shipping_address[0].city,\n          address_state: response.data[0].shipping_address[0].state,\n          email_address: response.data[0].email_address,\n          first_name: response.data[0].first_name,\n          last_name: response.data[0].last_name,\n          id: response.data[0]._id\n        }, () => {\n          this.originalEmail = this.state.email_address;\n        });\n      }).catch(function (error) {\n        console.log(error);\n      });\n    });\n  }\n\n  removeSession() {\n    return new Promise(resolve => {\n      axios.post(\"http://localhost:4000/catweallgetalong/sessions/logout\").then(response => {\n        if (response === \"out\") this.sessionAdded = true;\n        resolve(\"resolved\");\n      }).catch(function (error) {\n        console.log(error);\n      });\n    });\n  }\n\n  addSession() {\n    return new Promise(resolve => {\n      axios.post(\"http://localhost:4000/catweallgetalong/sessions/login\", {\n        email: this.state.email_address\n      }).then(response => {\n        if (response !== \"Error\") this.sessionAdded = true;\n        resolve(\"resolved\");\n      }).catch(function (error) {\n        console.log(error);\n      });\n    });\n  }\n\n  async logoutUser() {\n    // remove session\n    await this.removeSession(); // redirect to \"/\"\n\n    this.redirect = true;\n    this.forceUpdate(); // refresh page (will eliminate cart!)\n\n    window.location.reload(false);\n  }\n\n  checkEmailChanged() {\n    return new Promise(resolve => {\n      if (this.originalEmail === this.state.email_address) {\n        this.setState({\n          isEmailChanged: false\n        }, resolve(\"resolved\"));\n      } else {\n        this.setState({\n          isEmailChanged: true\n        }, resolve(\"resolved\"));\n      }\n    });\n  }\n\n  async handleOnSubmit(event) {\n    event.preventDefault();\n\n    if (this.state.isEmailChanged === true) {\n      await this.checkEmailChanged();\n    } // check address is valid\n\n\n    if (this.state.address_line1.length > 0 && this.state.address_city.length > 0 && this.state.address_state.length > 0 && this.state.address_zipcode.length > 0) {\n      await this.verifyShippingAddress();\n    } // check email duplicate db only if they changed the value!\n\n\n    if (this.state.isEmailChanged) {\n      await this.checkDuplicateEmail(); // check email valid\n\n      await this.checkValidityEmail();\n    } else {\n      this.email_verified = true;\n      this.email_isDuplicate = false;\n    } //verify that all REQUIRED inputs are filled\n\n\n    this.name_isInputted = this.state.first_name.length > 0 && this.state.last_name.length > 0;\n\n    if (this.address_verified && this.email_verified && !this.email_isDuplicate && this.name_isInputted) {\n      // post accounts update by id\n      await this.updateAccountInDB(); // log user in via db\n\n      await this.addSession(); // logged in so redirect to /cart\n\n      if (this.sessionAdded) {\n        //redirect to cart\n        this.setState({\n          redirect: true\n        });\n      }\n    } else {\n      // inject red text informing what to fix\n      this.display_errors = true;\n      this.forceUpdate();\n    }\n  }\n\n  render() {\n    if (this.state.redirect) {\n      return /*#__PURE__*/React.createElement(Redirect, {\n        to: \"/\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 359,\n          columnNumber: 20\n        }\n      });\n    }\n\n    return /*#__PURE__*/React.createElement(React.Fragment, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 362,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 363,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        display: \"flex\",\n        flexDirection: \"row\",\n        justifyContent: \"flex-end\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 364,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      className: \"btn btn-danger\",\n      onClick: this.logoutUser.bind(this),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 371,\n        columnNumber: 25\n      }\n    }, \"Logout\")), /*#__PURE__*/React.createElement(Title, {\n      name: \"Edit\",\n      title: \"Account\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 379,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(HandleDisplayErrors, {\n      display_errors: this.display_errors,\n      address_verified: this.address_verified,\n      email_verified: this.email_verified,\n      email_isDuplicate: this.email_isDuplicate,\n      name_isInputted: this.name_isInputted,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 380,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(\"form\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 388,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 389,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"inputFirstName\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 390,\n        columnNumber: 29\n      }\n    }, \"First Name\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"name\",\n      className: \"form-control\",\n      id: \"inputFirstName\",\n      placeholder: \"John\",\n      onChange: event => {\n        this.setState({\n          first_name: event.target.value\n        });\n      },\n      value: this.state.first_name,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 391,\n        columnNumber: 29\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 404,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"inputLastName\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 405,\n        columnNumber: 29\n      }\n    }, \"Last Name\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"name\",\n      className: \"form-control\",\n      id: \"inputLastName\",\n      placeholder: \"Doe\",\n      onChange: event => this.setState({\n        last_name: event.target.value\n      }),\n      value: this.state.last_name,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 406,\n        columnNumber: 29\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 419,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"inputEmail\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 420,\n        columnNumber: 29\n      }\n    }, \"Email address\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"email\",\n      className: \"form-control\",\n      id: \"inputEmail\",\n      \"aria-describedby\": \"emailHelp\",\n      placeholder: \"Enter email\",\n      onChange: event => {\n        this.setState({\n          email_address: event.target.value.toLowerCase(),\n          isEmailChanged: true\n        });\n      },\n      value: this.state.email_address,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 421,\n        columnNumber: 29\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 436,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"addLine1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 437,\n        columnNumber: 29\n      }\n    }, \"Address Line 1\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"address\",\n      className: \"form-control\",\n      id: \"addLine1\",\n      placeholder: \"3901 SW 154th Ave\",\n      onChange: event => this.setState({\n        address_line1: event.target.value\n      }),\n      value: this.state.address_line1,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 438,\n        columnNumber: 29\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 451,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"addLine2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 452,\n        columnNumber: 29\n      }\n    }, \"Address Line 2\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"address\",\n      className: \"form-control\",\n      id: \"addLine2\",\n      placeholder: \"closest under the street\",\n      onChange: event => this.setState({\n        address_line2: event.target.value\n      }),\n      value: this.state.address_line2,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 453,\n        columnNumber: 29\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 466,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"secondary\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 467,\n        columnNumber: 29\n      }\n    }, \"Apt / Suite / Other\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"address\",\n      className: \"form-control\",\n      id: \"secondary\",\n      placeholder: \"Apt# 314\",\n      onChange: event => this.setState({\n        address_secondary: event.target.value\n      }),\n      value: this.state.address_secondary,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 470,\n        columnNumber: 29\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 483,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"city\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 484,\n        columnNumber: 29\n      }\n    }, \"City\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"address\",\n      className: \"form-control\",\n      id: \"city\",\n      placeholder: \"Davie\",\n      onChange: event => this.setState({\n        address_city: event.target.value\n      }),\n      value: this.state.address_city,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 485,\n        columnNumber: 29\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 498,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"zip\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 499,\n        columnNumber: 29\n      }\n    }, \"Zipcode\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"address\",\n      className: \"form-control\",\n      id: \"zip\",\n      placeholder: \"33331\",\n      onChange: event => this.setState({\n        address_zipcode: event.target.value\n      }),\n      value: this.state.address_zipcode,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 500,\n        columnNumber: 29\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 513,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"state\",\n      className: \"col-s control-label\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 514,\n        columnNumber: 29\n      }\n    }, \"State\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-s\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 520,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"select\", {\n      className: \"form-control\",\n      id: \"state\",\n      name: \"state\",\n      onChange: event => this.setState({\n        address_state: event.target.value\n      }),\n      value: this.state.address_state,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 521,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"option\", {\n      value: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 532,\n        columnNumber: 37\n      }\n    }, \"N/A\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"AK\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 533,\n        columnNumber: 37\n      }\n    }, \"Alaska\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"AL\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 534,\n        columnNumber: 37\n      }\n    }, \"Alabama\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"AR\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 535,\n        columnNumber: 37\n      }\n    }, \"Arkansas\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"AZ\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 536,\n        columnNumber: 37\n      }\n    }, \"Arizona\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"CA\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 537,\n        columnNumber: 37\n      }\n    }, \"California\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"CO\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 538,\n        columnNumber: 37\n      }\n    }, \"Colorado\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"CT\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 539,\n        columnNumber: 37\n      }\n    }, \"Connecticut\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"DC\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 540,\n        columnNumber: 37\n      }\n    }, \"District of Columbia\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"DE\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 543,\n        columnNumber: 37\n      }\n    }, \"Delaware\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"FL\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 544,\n        columnNumber: 37\n      }\n    }, \"Florida\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"GA\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 545,\n        columnNumber: 37\n      }\n    }, \"Georgia\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"HI\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 546,\n        columnNumber: 37\n      }\n    }, \"Hawaii\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"IA\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 547,\n        columnNumber: 37\n      }\n    }, \"Iowa\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"ID\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 548,\n        columnNumber: 37\n      }\n    }, \"Idaho\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"IL\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 549,\n        columnNumber: 37\n      }\n    }, \"Illinois\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"IN\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 550,\n        columnNumber: 37\n      }\n    }, \"Indiana\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"KS\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 551,\n        columnNumber: 37\n      }\n    }, \"Kansas\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"KY\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 552,\n        columnNumber: 37\n      }\n    }, \"Kentucky\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"LA\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 553,\n        columnNumber: 37\n      }\n    }, \"Louisiana\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"MA\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 554,\n        columnNumber: 37\n      }\n    }, \"Massachusetts\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"MD\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 555,\n        columnNumber: 37\n      }\n    }, \"Maryland\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"ME\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 556,\n        columnNumber: 37\n      }\n    }, \"Maine\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"MI\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 557,\n        columnNumber: 37\n      }\n    }, \"Michigan\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"MN\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 558,\n        columnNumber: 37\n      }\n    }, \"Minnesota\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"MO\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 559,\n        columnNumber: 37\n      }\n    }, \"Missouri\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"MS\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 560,\n        columnNumber: 37\n      }\n    }, \"Mississippi\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"MT\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 561,\n        columnNumber: 37\n      }\n    }, \"Montana\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"NC\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 562,\n        columnNumber: 37\n      }\n    }, \"North Carolina\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"ND\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 563,\n        columnNumber: 37\n      }\n    }, \"North Dakota\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"NE\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 564,\n        columnNumber: 37\n      }\n    }, \"Nebraska\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"NH\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 565,\n        columnNumber: 37\n      }\n    }, \"New Hampshire\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"NJ\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 566,\n        columnNumber: 37\n      }\n    }, \"New Jersey\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"NM\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 567,\n        columnNumber: 37\n      }\n    }, \"New Mexico\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"NV\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 568,\n        columnNumber: 37\n      }\n    }, \"Nevada\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"NY\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 569,\n        columnNumber: 37\n      }\n    }, \"New York\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"OH\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 570,\n        columnNumber: 37\n      }\n    }, \"Ohio\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"OK\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 571,\n        columnNumber: 37\n      }\n    }, \"Oklahoma\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"OR\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 572,\n        columnNumber: 37\n      }\n    }, \"Oregon\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"PA\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 573,\n        columnNumber: 37\n      }\n    }, \"Pennsylvania\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"PR\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 574,\n        columnNumber: 37\n      }\n    }, \"Puerto Rico\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"RI\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 575,\n        columnNumber: 37\n      }\n    }, \"Rhode Island\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"SC\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 576,\n        columnNumber: 37\n      }\n    }, \"South Carolina\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"SD\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 577,\n        columnNumber: 37\n      }\n    }, \"South Dakota\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"TN\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 578,\n        columnNumber: 37\n      }\n    }, \"Tennessee\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"TX\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 579,\n        columnNumber: 37\n      }\n    }, \"Texas\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"UT\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 580,\n        columnNumber: 37\n      }\n    }, \"Utah\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"VA\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 581,\n        columnNumber: 37\n      }\n    }, \"Virginia\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"VT\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 582,\n        columnNumber: 37\n      }\n    }, \"Vermont\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"WA\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 583,\n        columnNumber: 37\n      }\n    }, \"Washington\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"WI\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 584,\n        columnNumber: 37\n      }\n    }, \"Wisconsin\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"WV\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 585,\n        columnNumber: 37\n      }\n    }, \"West Virginia\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"WY\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 586,\n        columnNumber: 37\n      }\n    }, \"Wyoming\")))), /*#__PURE__*/React.createElement(HandleDisplayErrors, {\n      display_errors: this.display_errors,\n      address_verified: this.address_verified,\n      email_verified: this.email_verified,\n      email_isDuplicate: this.email_isDuplicate,\n      name_isInputted: this.name_isInputted,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 591,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-primary\",\n      onClick: this.handleOnSubmit.bind(this),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 598,\n        columnNumber: 25\n      }\n    }, \"Edit Account\"))));\n  }\n\n}","map":{"version":3,"sources":["/Users/fazalmahmood/SWE-E-Commerce-Project/e-commerce-store/client/src/components/Account/AccountEdit.js"],"names":["React","Component","Title","Redirect","axios","HandleDisplayErrors","props","buffer","display_errors","email_isDuplicate","push","color","address_verified","email_verified","name_isInputted","padding","AccountEdit","constructor","state","address_line1","address_line2","address_secondary","address_zipcode","address_city","address_state","email_address","isEmailChanged","id","first_name","last_name","redirect","originalEmail","componentDidMount","loadUserValues","checkDuplicateEmail","Promise","resolve","get","then","res","data","catch","error","console","log","updateAccountInDB","post","shipping_address","street1","street2","secondary","city","zipcode","_id","response","verifyShippingAddress","SmartyStreetsSDK","require","SmartyStreetsCore","core","Lookup","usStreet","authId","authToken","process","env","SMARTY_AUTH_TOKEN","credentials","StaticCredentials","verifyAddress","buildClient","batch","Batch","lookup1","street","zipCode","match","add","send","lookups","map","lookup","result","analysis","dpvMatchCode","lastLine","split","setState","deliveryLine1","substring","length","deliveryLine2","checkValidityEmail","removeSession","sessionAdded","addSession","email","logoutUser","forceUpdate","window","location","reload","checkEmailChanged","handleOnSubmit","event","preventDefault","render","display","flexDirection","justifyContent","bind","target","value","toLowerCase"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport Title from \"../../components/General/Title\";\nimport { Redirect } from \"react-router-dom\";\nimport axios from \"axios\";\n\nfunction HandleDisplayErrors(props) {\n    let buffer = [];\n    if (props.display_errors) {\n        if (props.email_isDuplicate) {\n            buffer.push(\n                <div key=\"email1\" style={{ color: \"red\" }}>\n                    * Email Address is already in use.\n                </div>\n            );\n        } else {\n            if (!props.address_verified) {\n                buffer.push(\n                    <div key=\"address1\" style={{ color: \"red\" }}>\n                        * Please enter a valid Shipping Address.\n                    </div>\n                );\n            }\n            if (!props.email_verified) {\n                buffer.push(\n                    <div key=\"email2\" style={{ color: \"red\" }}>\n                        * Please enter a valid Email Address.\n                    </div>\n                );\n            }\n            if (!props.name_isInputted) {\n                buffer.push(\n                    <div key=\"names1\" style={{ color: \"red\" }}>\n                        * Please enter a First and Last Name.\n                    </div>\n                );\n            }\n        }\n    }\n    return <div style={{ padding: 10 }}>{buffer}</div>;\n}\n\nexport default class AccountEdit extends Component {\n    constructor(props) {\n        super(props);\n        // Assign state itself, and a default value for items\n        this.state = {\n            address_line1: \"\",\n            address_line2: \"\",\n            address_secondary: \"\",\n            address_zipcode: \"\",\n            address_city: \"\",\n            address_state: \"\",\n\n            email_address: \"\",\n            isEmailChanged: false,\n            id: \"\",\n            first_name: \"\",\n            last_name: \"\",\n        };\n\n        this.redirect = false;\n\n        this.address_verified = false;\n        this.email_verified = false;\n        this.email_isDuplicate = false;\n        this.name_isInputted = false;\n        this.display_errors = false;\n        this.originalEmail = \"\";\n    }\n\n    async componentDidMount() {\n        await this.loadUserValues();\n    }\n\n    checkDuplicateEmail() {\n        return new Promise((resolve) => {\n            axios\n                .get(\n                    \"http://localhost:4000/catweallgetalong/accounts/email/\" +\n                        this.state.email_address\n                )\n                .then((res) => {\n                    this.email_isDuplicate = res.data > 0;\n                    resolve(\"resolved\");\n                })\n                .catch(function (error) {\n                    console.log(error);\n                    //call the function again?\n                });\n        });\n    }\n\n    updateAccountInDB() {\n        return new Promise((resolve) => {\n            console.log(this.state.address_secondary);\n            axios\n                .post(\"http://localhost:4000/catweallgetalong/accounts/edit\", {\n                    shipping_address: {\n                        street1: this.state.address_line1,\n                        street2: this.state.address_line2,\n                        secondary: this.state.secondary,\n                        city: this.state.address_city,\n                        state: this.state.address_state,\n                        zipcode: this.state.address_zipcode,\n                    },\n\n                    _id: this.state.id,\n                    first_name: this.state.first_name,\n                    last_name: this.state.last_name,\n                    email_address: this.state.email_address,\n                })\n                .then(function (response) {\n                    resolve(\"resolved\");\n                })\n                .catch(function (error) {\n                    console.log(error);\n                });\n        });\n    }\n\n    verifyShippingAddress() {\n        return new Promise((resolve) => {\n            const SmartyStreetsSDK = require(\"smartystreets-javascript-sdk\");\n            const SmartyStreetsCore = SmartyStreetsSDK.core;\n            const Lookup = SmartyStreetsSDK.usStreet.Lookup;\n\n            let authId = 24176270692624972; // created on smartystreets account page for localhost\n            let authToken = process.env.SMARTY_AUTH_TOKEN;\n            const credentials = new SmartyStreetsCore.StaticCredentials(\n                authId,\n                authToken\n            );\n\n            let verifyAddress = SmartyStreetsCore.buildClient.usStreet(\n                credentials\n            );\n\n            let batch = new SmartyStreetsCore.Batch();\n            let lookup1 = new Lookup();\n\n            lookup1.street = this.state.address_line1;\n            lookup1.street2 = this.state.address_line2;\n            lookup1.secondary = this.state.address_secondary;\n            lookup1.city = this.state.address_city;\n            lookup1.state = this.state.address_state;\n            lookup1.zipCode = this.state.address_zipcode;\n            lookup1.match = \"invalid\"; // \"invalid\" is the most permissive match\n            batch.add(lookup1);\n            verifyAddress\n                .send(batch)\n                .then((response) => {\n                    response.lookups.map((lookup) => {\n                        if (lookup.result[0].analysis.dpvMatchCode === \"Y\") {\n                            let res = lookup.result[0].lastLine.split(\" \");\n                            this.setState({\n                                address_line1: lookup.result[0].deliveryLine1.substring(\n                                    0,\n                                    this.state.address_line1.length\n                                ),\n                                address_city: res[0],\n                                address_state: res[1],\n                                address_zipcode: res[2],\n                            });\n                            if (lookup.result[0].deliveryLine2 != null) {\n                                this.setState({\n                                    address_line2:\n                                        lookup.result[0].deliveryLine2,\n                                });\n                            }\n                            this.address_verified = true;\n                        } else {\n                            this.address_verified = false;\n                        }\n                        return null;\n                    });\n                    resolve(\"resolved\");\n                })\n                .catch(() => {\n                    this.address_verified = false;\n                    resolve(\"resolved\");\n                });\n        });\n    }\n\n    checkValidityEmail() {\n        return new Promise((resolve) => {\n            axios\n                .get(\n                    \"http://localhost:4000/catweallgetalong/accounts/nb/\" +\n                        this.state.email_address\n                )\n                .then((response) => {\n                    if (response.data === \"valid\") {\n                        this.email_verified = true;\n                    } else {\n                        this.email_verified = false;\n                    }\n                    resolve(\"resolved\");\n                })\n                .catch(function (error) {\n                    console.log(error);\n                });\n        });\n    }\n\n    loadUserValues() {\n        return new Promise((resolve) => {\n            axios\n                .get(\n                    \"http://localhost:4000/catweallgetalong/sessions/user-info\"\n                )\n                .then((response) => {\n                    this.setState(\n                        {\n                            address_line1:\n                                response.data[0].shipping_address[0].street1,\n                            address_line2:\n                                response.data[0].shipping_address[0].street2,\n                            address_secondary:\n                                response.data[0].shipping_address[0].secondary,\n                            address_zipcode:\n                                response.data[0].shipping_address[0].zipcode,\n                            address_city:\n                                response.data[0].shipping_address[0].city,\n                            address_state:\n                                response.data[0].shipping_address[0].state,\n                            email_address: response.data[0].email_address,\n                            first_name: response.data[0].first_name,\n                            last_name: response.data[0].last_name,\n                            id: response.data[0]._id,\n                        },\n                        () => {\n                            this.originalEmail = this.state.email_address;\n                        }\n                    );\n                })\n                .catch(function (error) {\n                    console.log(error);\n                });\n        });\n    }\n\n    removeSession() {\n        return new Promise((resolve) => {\n            axios\n                .post(\"http://localhost:4000/catweallgetalong/sessions/logout\")\n                .then((response) => {\n                    if (response === \"out\") this.sessionAdded = true;\n                    resolve(\"resolved\");\n                })\n                .catch(function (error) {\n                    console.log(error);\n                });\n        });\n    }\n\n    addSession() {\n        return new Promise((resolve) => {\n            axios\n                .post(\"http://localhost:4000/catweallgetalong/sessions/login\", {\n                    email: this.state.email_address,\n                })\n                .then((response) => {\n                    if (response !== \"Error\") this.sessionAdded = true;\n                    resolve(\"resolved\");\n                })\n                .catch(function (error) {\n                    console.log(error);\n                });\n        });\n    }\n\n    async logoutUser() {\n        // remove session\n        await this.removeSession();\n        // redirect to \"/\"\n        this.redirect = true;\n        this.forceUpdate();\n        // refresh page (will eliminate cart!)\n        window.location.reload(false);\n    }\n\n    checkEmailChanged() {\n        return new Promise((resolve) => {\n            if (this.originalEmail === this.state.email_address) {\n                this.setState(\n                    {\n                        isEmailChanged: false,\n                    },\n                    resolve(\"resolved\")\n                );\n            } else {\n                this.setState(\n                    {\n                        isEmailChanged: true,\n                    },\n                    resolve(\"resolved\")\n                );\n            }\n        });\n    }\n\n    async handleOnSubmit(event) {\n        event.preventDefault();\n        if (this.state.isEmailChanged === true) {\n            await this.checkEmailChanged();\n        }\n        // check address is valid\n        if (\n            this.state.address_line1.length > 0 &&\n            this.state.address_city.length > 0 &&\n            this.state.address_state.length > 0 &&\n            this.state.address_zipcode.length > 0\n        ) {\n            await this.verifyShippingAddress();\n        }\n\n        // check email duplicate db only if they changed the value!\n        if (this.state.isEmailChanged) {\n            await this.checkDuplicateEmail();\n\n            // check email valid\n            await this.checkValidityEmail();\n        } else {\n            this.email_verified = true;\n            this.email_isDuplicate = false;\n        }\n\n        //verify that all REQUIRED inputs are filled\n        this.name_isInputted =\n            this.state.first_name.length > 0 && this.state.last_name.length > 0;\n\n        if (\n            this.address_verified &&\n            this.email_verified &&\n            !this.email_isDuplicate &&\n            this.name_isInputted\n        ) {\n            // post accounts update by id\n            await this.updateAccountInDB();\n            // log user in via db\n            await this.addSession();\n            // logged in so redirect to /cart\n            if (this.sessionAdded) {\n                //redirect to cart\n                this.setState({\n                    redirect: true,\n                });\n            }\n        } else {\n            // inject red text informing what to fix\n            this.display_errors = true;\n            this.forceUpdate();\n        }\n    }\n\n    render() {\n        if (this.state.redirect) {\n            return <Redirect to=\"/\" />;\n        }\n        return (\n            <React.Fragment>\n                <div>\n                    <div\n                        style={{\n                            display: \"flex\",\n                            flexDirection: \"row\",\n                            justifyContent: \"flex-end\",\n                        }}\n                    >\n                        <button\n                            type=\"button\"\n                            className=\"btn btn-danger\"\n                            onClick={this.logoutUser.bind(this)}\n                        >\n                            Logout\n                        </button>\n                    </div>\n                    <Title name=\"Edit\" title=\"Account\" />\n                    <HandleDisplayErrors\n                        display_errors={this.display_errors}\n                        address_verified={this.address_verified}\n                        email_verified={this.email_verified}\n                        email_isDuplicate={this.email_isDuplicate}\n                        name_isInputted={this.name_isInputted}\n                    />\n\n                    <form>\n                        <div className=\"form-group\">\n                            <label htmlFor=\"inputFirstName\">First Name</label>\n                            <input\n                                type=\"name\"\n                                className=\"form-control\"\n                                id=\"inputFirstName\"\n                                placeholder=\"John\"\n                                onChange={(event) => {\n                                    this.setState({\n                                        first_name: event.target.value,\n                                    });\n                                }}\n                                value={this.state.first_name}\n                            />\n                        </div>\n                        <div className=\"form-group\">\n                            <label htmlFor=\"inputLastName\">Last Name</label>\n                            <input\n                                type=\"name\"\n                                className=\"form-control\"\n                                id=\"inputLastName\"\n                                placeholder=\"Doe\"\n                                onChange={(event) =>\n                                    this.setState({\n                                        last_name: event.target.value,\n                                    })\n                                }\n                                value={this.state.last_name}\n                            />\n                        </div>\n                        <div className=\"form-group\">\n                            <label htmlFor=\"inputEmail\">Email address</label>\n                            <input\n                                type=\"email\"\n                                className=\"form-control\"\n                                id=\"inputEmail\"\n                                aria-describedby=\"emailHelp\"\n                                placeholder=\"Enter email\"\n                                onChange={(event) => {\n                                    this.setState({\n                                        email_address: event.target.value.toLowerCase(),\n                                        isEmailChanged: true,\n                                    });\n                                }}\n                                value={this.state.email_address}\n                            />\n                        </div>\n                        <div className=\"form-group\">\n                            <label htmlFor=\"addLine1\">Address Line 1</label>\n                            <input\n                                type=\"address\"\n                                className=\"form-control\"\n                                id=\"addLine1\"\n                                placeholder=\"3901 SW 154th Ave\"\n                                onChange={(event) =>\n                                    this.setState({\n                                        address_line1: event.target.value,\n                                    })\n                                }\n                                value={this.state.address_line1}\n                            />\n                        </div>\n                        <div className=\"form-group\">\n                            <label htmlFor=\"addLine2\">Address Line 2</label>\n                            <input\n                                type=\"address\"\n                                className=\"form-control\"\n                                id=\"addLine2\"\n                                placeholder=\"closest under the street\"\n                                onChange={(event) =>\n                                    this.setState({\n                                        address_line2: event.target.value,\n                                    })\n                                }\n                                value={this.state.address_line2}\n                            />\n                        </div>\n                        <div className=\"form-group\">\n                            <label htmlFor=\"secondary\">\n                                Apt / Suite / Other\n                            </label>\n                            <input\n                                type=\"address\"\n                                className=\"form-control\"\n                                id=\"secondary\"\n                                placeholder=\"Apt# 314\"\n                                onChange={(event) =>\n                                    this.setState({\n                                        address_secondary: event.target.value,\n                                    })\n                                }\n                                value={this.state.address_secondary}\n                            />\n                        </div>\n                        <div className=\"form-group\">\n                            <label htmlFor=\"city\">City</label>\n                            <input\n                                type=\"address\"\n                                className=\"form-control\"\n                                id=\"city\"\n                                placeholder=\"Davie\"\n                                onChange={(event) =>\n                                    this.setState({\n                                        address_city: event.target.value,\n                                    })\n                                }\n                                value={this.state.address_city}\n                            />\n                        </div>\n                        <div className=\"form-group\">\n                            <label htmlFor=\"zip\">Zipcode</label>\n                            <input\n                                type=\"address\"\n                                className=\"form-control\"\n                                id=\"zip\"\n                                placeholder=\"33331\"\n                                onChange={(event) =>\n                                    this.setState({\n                                        address_zipcode: event.target.value,\n                                    })\n                                }\n                                value={this.state.address_zipcode}\n                            />\n                        </div>\n                        <div className=\"form-group\">\n                            <label\n                                htmlFor=\"state\"\n                                className=\"col-s control-label\"\n                            >\n                                State\n                            </label>\n                            <div className=\"col-s\">\n                                <select\n                                    className=\"form-control\"\n                                    id=\"state\"\n                                    name=\"state\"\n                                    onChange={(event) =>\n                                        this.setState({\n                                            address_state: event.target.value,\n                                        })\n                                    }\n                                    value={this.state.address_state}\n                                >\n                                    <option value=\"\">N/A</option>\n                                    <option value=\"AK\">Alaska</option>\n                                    <option value=\"AL\">Alabama</option>\n                                    <option value=\"AR\">Arkansas</option>\n                                    <option value=\"AZ\">Arizona</option>\n                                    <option value=\"CA\">California</option>\n                                    <option value=\"CO\">Colorado</option>\n                                    <option value=\"CT\">Connecticut</option>\n                                    <option value=\"DC\">\n                                        District of Columbia\n                                    </option>\n                                    <option value=\"DE\">Delaware</option>\n                                    <option value=\"FL\">Florida</option>\n                                    <option value=\"GA\">Georgia</option>\n                                    <option value=\"HI\">Hawaii</option>\n                                    <option value=\"IA\">Iowa</option>\n                                    <option value=\"ID\">Idaho</option>\n                                    <option value=\"IL\">Illinois</option>\n                                    <option value=\"IN\">Indiana</option>\n                                    <option value=\"KS\">Kansas</option>\n                                    <option value=\"KY\">Kentucky</option>\n                                    <option value=\"LA\">Louisiana</option>\n                                    <option value=\"MA\">Massachusetts</option>\n                                    <option value=\"MD\">Maryland</option>\n                                    <option value=\"ME\">Maine</option>\n                                    <option value=\"MI\">Michigan</option>\n                                    <option value=\"MN\">Minnesota</option>\n                                    <option value=\"MO\">Missouri</option>\n                                    <option value=\"MS\">Mississippi</option>\n                                    <option value=\"MT\">Montana</option>\n                                    <option value=\"NC\">North Carolina</option>\n                                    <option value=\"ND\">North Dakota</option>\n                                    <option value=\"NE\">Nebraska</option>\n                                    <option value=\"NH\">New Hampshire</option>\n                                    <option value=\"NJ\">New Jersey</option>\n                                    <option value=\"NM\">New Mexico</option>\n                                    <option value=\"NV\">Nevada</option>\n                                    <option value=\"NY\">New York</option>\n                                    <option value=\"OH\">Ohio</option>\n                                    <option value=\"OK\">Oklahoma</option>\n                                    <option value=\"OR\">Oregon</option>\n                                    <option value=\"PA\">Pennsylvania</option>\n                                    <option value=\"PR\">Puerto Rico</option>\n                                    <option value=\"RI\">Rhode Island</option>\n                                    <option value=\"SC\">South Carolina</option>\n                                    <option value=\"SD\">South Dakota</option>\n                                    <option value=\"TN\">Tennessee</option>\n                                    <option value=\"TX\">Texas</option>\n                                    <option value=\"UT\">Utah</option>\n                                    <option value=\"VA\">Virginia</option>\n                                    <option value=\"VT\">Vermont</option>\n                                    <option value=\"WA\">Washington</option>\n                                    <option value=\"WI\">Wisconsin</option>\n                                    <option value=\"WV\">West Virginia</option>\n                                    <option value=\"WY\">Wyoming</option>\n                                </select>\n                            </div>\n                        </div>\n\n                        <HandleDisplayErrors\n                            display_errors={this.display_errors}\n                            address_verified={this.address_verified}\n                            email_verified={this.email_verified}\n                            email_isDuplicate={this.email_isDuplicate}\n                            name_isInputted={this.name_isInputted}\n                        />\n                        <button\n                            className=\"btn btn-primary\"\n                            onClick={this.handleOnSubmit.bind(this)}\n                        >\n                            Edit Account\n                        </button>\n                    </form>\n                </div>\n            </React.Fragment>\n        );\n    }\n}\n"]},"metadata":{},"sourceType":"module"}